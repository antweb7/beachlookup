---
/** Zero-JS responsive header using <details>/<summary> for mobile */
const path = Astro.url.pathname;

// naive lang swap: if path starts with /en/ or /es/, flip the segment; else default to /en/
function withLang(lang: 'en'|'es') {
  if (path.startsWith('/en/')) return path.replace(/^\/en\//, `/${lang}/`);
  if (path.startsWith('/es/')) return path.replace(/^\/es\//, `/${lang}/`);
  return `/${lang}/`;
}

const navLinks = [
  { href: '/', label: 'Home' },
  // You can add more later, e.g. region index: { href: '/en/alicante/beaches/', label: 'Alicante' }
];
---
<header class="border-b border-slate-200 bg-white/90 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-30">
  <div class="mx-auto max-w-5xl px-4 py-3">
    <div class="flex items-center justify-between">
      <!-- Brand -->
      <a href="/" class="flex items-center gap-2">
        <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-blue-600 text-white font-semibold">B</span>
        <span class="text-lg font-semibold tracking-tight text-slate-900">BeachLookup</span>
      </a>

      <!-- Desktop nav -->
      <nav class="hidden md:flex items-center gap-6">
        {navLinks.map((l) => <a href={l.href} class="text-sm font-medium text-slate-700 hover:text-slate-900">{l.label}</a>)}
        <div class="h-5 w-px bg-slate-200" />
        <a href={withLang('en')} class="text-sm text-slate-600 hover:text-slate-900">EN</a>
        <a href={withLang('es')} class="text-sm text-slate-600 hover:text-slate-900">ES</a>
      </nav>

      <!-- Mobile nav (details/summary) -->
      <details class="md:hidden group relative">
        <summary class="list-none cursor-pointer rounded-lg p-2 hover:bg-slate-100 transition">
          <span class="sr-only">Menu</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-700 group-open:hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-700 hidden group-open:block" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </summary>
        <div class="absolute right-0 mt-2 w-56 rounded-xl border border-slate-200 bg-white p-2 shadow-md">
          <nav class="flex flex-col">
            {navLinks.map((l) => (
              <a href={l.href} class="rounded-lg px-3 py-2 text-sm text-slate-700 hover:bg-slate-50">{l.label}</a>
            ))}
            <div class="my-2 h-px bg-slate-200" />
            <div class="flex items-center justify-between px-3 py-1.5">
              <a href={withLang('en')} class="text-sm text-slate-700 hover:underline">English</a>
              <a href={withLang('es')} class="text-sm text-slate-700 hover:underline">Espa√±ol</a>
            </div>
          </nav>
        </div>
      </details>
    </div>
  </div>
</header>
